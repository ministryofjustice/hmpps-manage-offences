{% extends "layout.njk" %}
{%- from "govuk/components/tag/macro.njk" import govukTag -%}
{% from "partials/nav.njk" import navBar with context %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "govuk/components/button/macro.njk" import govukButton %}
{% from "govuk/components/input/macro.njk" import govukInput %}
{% from "govuk/components/radios/macro.njk" import govukRadios %}
{% from "partials/offenceTable.njk" import offenceTable %}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}


{% set pageTitle = applicationName + " - Schedules" %}
{% set pageId = "schedules" %}

{% block navBar %}
    {{ navBar("schedules") }}
{% endblock %}

{% block beforeContent %}
    {{ govukBreadcrumbs({
        items: [
            {
                text: "Schedules",
                href: "/schedules"
            },
            {
                text: "Parts and offences",
                href: "/schedules/parts-and-offences/" + fullSchedule.id
            }
        ]
    }) }}
{% endblock %}

{% block content %}
    <h1 class="govuk-heading-l">Schedule {{ fullSchedule.code }} ({{ fullSchedule.act }})</h1>

    {% for part in fullSchedule.scheduleParts %}
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-three-quarters">
                <h2 class="govuk-heading-m">Part {{ part.partNumber }}</h2>
            </div>
            <div class="govuk-grid-column-one-quarter text-align-right">
                {{ govukButton({
                    classes: "govuk-button--tertiary",
                    text: "Add offences",
                    preventDoubleClick: true,
                    href: '/schedules/add-offences/' + fullSchedule.id + '/' + part.id,
                    attributes: {  'data-qa': 'add-offences' }
                }) }}
            </div>
        </div>
        {{ offenceTable(part.offences, fullSchedule.id, part.id, null, csrfToken, 'REMOVE') }}
    {% endfor %}
    {{ govukButton({
        classes: "govuk-button--secondary",
        text: "Back",
        preventDoubleClick: true,
        href: '/schedules',
        attributes: {  'data-qa': 'search-offences' }
    }) }}
{% endblock %}
